<!DOCTYPE html>
<html>
  <head>
    <title>Uh Oh!</title>
    <script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alumni+Sans+Inline+One:ital@0;1&family=Delius+Unicase:wght@400;700&family=Diplomata+SC&family=Notable&family=Titan+One&family=Vina+Sans&display=swap" rel="stylesheet">


    <style>
      .delius-unicase-regular {
        font-family: "Delius Unicase", cursive;
        font-weight: 400;
        font-style: normal;
      }

      .delius-unicase-bold {
        font-family: "Delius Unicase", cursive;
        font-weight: 700;
        font-style: normal;
      }
      
      .titan-one-regular {
        font-family: "Titan One", sans-serif;
        font-weight: 400;
        font-style: normal;
      }
      
      .vina-sans-regular {
        font-family: "Vina Sans", sans-serif;
        font-weight: 400;
        font-style: normal;
      }
      
      .notable-regular {
        font-family: "Notable", sans-serif;
        font-weight: 400;
        font-style: normal;
      }

      .alumni-sans-inline-one-regular {
        font-family: "Alumni Sans Inline One", sans-serif;
        font-weight: 400;
        font-style: normal;
      }

      .alumni-sans-inline-one-regular-italic {
        font-family: "Alumni Sans Inline One", sans-serif;
        font-weight: 400;
        font-style: italic;
      }
      
      .diplomata-sc-regular {
        font-family: "Diplomata SC", serif;
        font-weight: 400;
        font-style: normal;
      }
      
      .flashing-image {
        animation: flash 1s infinite;
      }
      
      @keyFrames flash {
        0%, 100% {
          opacity: 1;
        } 50% {
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <script>
      /* global nn */

      let email = "your@email.com";
      
      async function ahhVirus(email) {
        const res = await fetch(`https://api.xposedornot.com/v1/check-email/${email}`);
        const json = await res.json();
        
        let messages = [];
        if (json.breaches) {
          messages = json.breaches[0];
        } else {
          messages = [
            "You are really good at creating passwords!", 
            "NO BREACHES!!", 
            "Data SO Safe!", 
            "Keep up the good work.", 
            "Password Wizard", 
            "You must keep a spreadsheet!"
          ];
        }
        
        nn.get("body").css({
          backgroundColor: "blue"
        });
        
        for (let i = 0; i < messages.length; i++) {
          const message = messages[i];
          
          const post = nn.create("div").css({
            padding: "15px",
            backgroundColor: "red",
            border: "15px solid white",
            textAlign: "center",
            fontSize: "25px",
            fontFamily: "Diplomata SC",
            display: "inline-block",
            position: "absolute",
            color: "white",
            fontWeight: "bold",
            maxWidth: "500px",
            left: `${Math.random() * nn.width}px`,
            top: `${Math.random() * nn.height}px`
          })
          
          post.innerText = message;
          nn.get("body").append(post);
          await nn.sleep(Math.random() * 4500 + 1000);
        }
      }

      async function setup() {
        //add a div requesting user email
        const askEmail = nn.create("div").css({
          padding: "20px",
          backgroundColor: "white",
          border: "2px solid black",
          width: "300px",
          margin: "20px auto",
          textAlign: "center",
          lineHeight: "30px",
          fontSize: "15px"
        });
        askEmail.classList.add("delius-unicase-bold");

        const label = nn.create("label");
        label.innerText = "Please Enter YOUR Email!";
        label.htmlFor = "emailInput";

        const input = nn.create("input");
        input.type = "email";
        input.id = "emailInput";
        input.placeholder = "your@email.com";

        const button = nn.create("button").css({
          margin: "10px 0px 10px 10px",
          backgroundColor: "pink",
          fontFamily: "Delius Unicase",
          fontWeight: "bold",
          fontSize: "12px"
        })
        button.innerText = "submit";
        button.onclick = (() => {
          email = input.value;
          console.log(`${email}`);
          input.value = '';
          ahhVirus(email);
        });

        askEmail.append(label);
        askEmail.append(input);
        askEmail.append(button);
        nn.get("body").append(askEmail);

        nn.get("body").css({
          display: "flex",
          flexDirection: "column",
          background: "lightpink",
          height: "100vh",
          justifyContent: "center",
          alignItems: "center"
        });
      }
      
      nn.on('load', setup);
    </script>
  </body>
</html>